@model CampusNabber.Models.MarketPlace


@{
    ViewBag.Title = "MainMarketView";
}
<h2>MainMarketView</h2>







<div class="row">
    <div class="col-md-12">
        <table class="table table-borderless" id="displayTable">
            <tbody>
                @{
                    int j = 1;
                    for (int i = Model.rangeFrom; i < Model.rangeTo; i++)
                    {
                        if (Model.numPosts > 0)
                        {
                            var element = Model.getPost(i);
                            <tr>
                                <td>
                                    <a href="@Url.Action("Details", "PostItems", new { id = element.object_id })" id="@j">

                                    </a>
                                </td>
                            </tr>
                        }
                        j++;
                    }

                }
            </tbody>
        </table>

        <br />

        @Html.ActionLink("Create", "Create", "PostItems")
        @Html.EditorFor(model => Model.Posts)




        <br />
        @Html.HiddenFor(model => Model.rangeFrom, new { id = "rangeFrom" })
        <br />
        @Html.HiddenFor(model => Model.rangeTo, new { id = "rangeTo" })
        <br />
        @Html.HiddenFor(model => Model.school_name)

        <br />
        @Html.HiddenFor(model => Model.displayRange)



        <br />


        <div class="form-group">
            <div class="col-md-offset-2 col-md-10">

                <button type="button" onclick="displayNext(-1)" class="btn btn-primary btn-lg">Previous</button>
                <button type="button" onclick="displayNext(1)" class="btn btn-primary btn-lg">Next</button>

            </div>
        </div>
    </div>
</div>








    





<script>
    var data = function () { return @Html.Raw(Json.Encode(Model)); }();

    var rangeTo = data.rangeTo;
    var rangeFrom = data.rangeFrom;
    
    $(document).ready(displayNext(0));
    function displayNext(inp) {
       
        if (data.numPosts > 0) {
            if (inp == 0) {

                var i = 1;

                for (var j = rangeFrom; j < rangeTo; j++) {
                    var element = data.Posts[j];

                    var tar = $('#' + i);
                    var url = '@Url.Action("Details", "PostItems")?id=' + element.object_id;
                    $(tar).attr("href", url);
                    $(tar).text(element.title + " $" + element.price);
                    i++;
                }
            }
            if (inp == 1) {

                if ((rangeTo + 1) < data.numPosts) {
                    rangeTo = rangeTo + data.displayRange;
                    rangeFrom = rangeFrom + data.displayRange;
                }

                var i = 1;


                for (var j = rangeFrom; j < rangeTo; j++) {
                    var element = data.Posts[j];
                    var tar = $('#' + i);
                    var url = '@Url.Action("Details", "PostItems")?id=' + element.object_id;
                    $(tar).attr("href", url);
                    $(tar).text(element.title + " $" + element.price);
                    i++;
                }

            }
            if (inp == -1) {
                if ((rangeFrom - 1) >= 0) {
                    rangeTo = rangeTo - data.displayRange;
                    rangeFrom = rangeFrom - data.displayRange;
                }
                var i = 1;
                if (rangeTo <= data.Posts.length) {
                    for (var j = rangeFrom; j < rangeTo; j++) {
                        var element = data.Posts[j];
                        var tar = $('#' + i);
                        var url = '@Url.Action("Details", "PostItems")?id=' + element.object_id;
                        $(tar).attr("href", url);
                        $(tar).text(element.title + " $" + element.price);
                        i++;
                    }
                }
            }
        }
        }
</script>
